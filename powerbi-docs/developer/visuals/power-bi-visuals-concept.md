---
title: Концепция визуального элемента в Power BI
description: В этой статье описывается, как визуальные элементы интегрируются в Power BI
author: zBritva
ms.author: v-ilgali
manager: rkarlin
ms.reviewer: sranins
ms.service: powerbi
ms.subservice: powerbi-custom-visuals
ms.topic: conceptual
ms.date: 06/18/2019
ms.openlocfilehash: 36742917829013a6efca9d74f88b01bc686437a8
ms.sourcegitcommit: f77b24a8a588605f005c9bb1fdad864955885718
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/02/2019
ms.locfileid: "74700853"
---
# <a name="power-bi-visual-concept"></a>Концепция визуального элемента в Power BI

В этой статье объясняется, как визуальный элемент взаимодействует с Power BI и как пользователь взаимодействует с визуальным элементом в Power BI. На схеме показано, какие действия влияют на визуальный элемент напрямую, а какие — через Power BI (например, при выборе закладок пользователем).

![Визуальный элемент Power BI](./media/visual-concept.svg)

## <a name="the-visual-gets-update-from-power-bi"></a>Получение изменения визуальным элементом из Power BI

У визуального элемента есть метод `update`. Обычно он содержит основную логику визуального элемента и отвечает за отрисовку диаграммы или визуализацию данных.

Большинство изменений передаются посредством вызова метода `update`.

### <a name="user-interacts-with-visual-through-power-bi"></a>Взаимодействие пользователя с визуальным элементом через Power BI

* Пользователь открывает панель свойств визуального элемента.

    Power BI извлекает поддерживаемые объекты и свойства из файла `capabilities.json` визуального элемента. Для получения фактических значений свойств Power BI вызывает метод `enumerateObjectInstances` визуального элемента.

    Визуальный элемент должен вернуть фактические значения свойств.

    Дополнительные сведения см. в [статье о возможностях визуальных элементов](capabilities.md).

* [Пользователь изменяет свойство визуального элемента](../../visuals/power-bi-visualization-customize-title-background-and-legend.md) на панели форматирования.

    После изменения значения свойства Power BI вызывает метод `update` визуального элемента и передает в метод update новые параметры `options` с новыми значениями объектов.

    Дополнительные сведения см. в [статье об объектах и свойствах визуальных элементов](objects-properties.md).

* Пользователь изменяет размер визуального элемента.

    Когда пользователь изменяет размер визуального элемента, Power BI вызывает метод `update` с новым объектом `option`. Объект option (параметр) имеет вложенный объект `viewport` с новой шириной и высотой визуального элемента.

* Пользователь применяет фильтр на уровне отчета, страницы или визуального элемента.

    Power BI фильтрует данные в соответствии с условиями фильтра и вызывает метод `update` визуального элемента для предоставления новых данных визуальному элементу.

    Визуальный элемент получает обновленные параметры `options` с новыми данными в одном из вложенных объектов. Этот объект зависит от того, как настроено сопоставление представления данных для визуального элемента.

    Дополнительные сведения см. в [статье о сопоставлениях представлений данных](dataview-mappings.md).

* Пользователь выбирает точку данных в другом визуальном элементе отчета.

    Power BI фильтрует или выделяет выбранные точки данных и вызывает метод `update` визуального элемента.

    Визуальный элемент получает новые отфильтрованные данные или те же данные с массивом выделений.

    Дополнительные сведения см. в [статье о выделении данных в визуальных элементах](highlight.md).

* Пользователь выбирает закладку на панели закладок отчета.

    Могут произойти два действия.

    1. Power BI вызывает функцию, зарегистрированную в методе `registerOnSelectionCallback`, и функция обратного вызова возвращает массивы выделений для соответствующей закладки.

    2. Power BI вызывает метод `update` с соответствующим объектом фильтра в параметрах `options`.

    В обоих случаях визуальный элемент должен изменить состояние визуализации в соответствии с полученными выделениями или объектом фильтра.

    Дополнительные сведения о закладках см. в [статье об управлении закладками](filter-api.md).

    Дополнительные сведения о фильтрах см. в [статье о фильтрации визуальными элементами Power BI данных в других визуальных элементах](filter-api.md).

### <a name="user-interacts-with-visual-directly"></a>Взаимодействие пользователя с визуальным элементом напрямую

* Пользователь наводит указатель мыши на элемент данных.

    Визуальный элемент может отображать дополнительные сведения о точках данных посредством API подсказок Power BI.
    Когда пользователь наводит указатель мыши на визуальный элемент, элемент может обработать событие и отобразить данные в элементе подсказки.

    Визуальный элемент может выводить стандартную подсказку или подсказку страницы отчета.

    Дополнительные сведения см. в [руководстве по добавлению подсказок](add-tooltips.md).

* Пользователь изменяет визуальные свойства (например, развертывает дерево, после чего визуальный элемент сохраняет состояние в свойствах).

    Визуальный элемент может сохранять значения свойств посредством API Power BI. Например, когда пользователь взаимодействует с визуальным элементом и элементу необходимо сохранить или изменить значения свойств, он может вызвать для этого метод `presistProperties`.

* Пользователь щелкает ссылку с URL-адресом.

    По умолчанию визуальный элемент не может открыть URL-адрес. Чтобы открыть URL-адрес на новой вкладке, визуальный элемент должен вызвать метод `launchURL` и передать URL-адрес в качестве параметра.

    Дополнительные сведения см. в [статье об API открытия URL-адресов](launch-url.md).

* Пользователь применяет фильтр посредством визуального элемента.

    Визуальный элемент вызывает метод `applyJSONFilter` и передает в фильтр условия для фильтрации данных в другом визуальном элементе.

    Визуальный элемент может использовать фильтры нескольких типов, таких как базовый, расширенный и фильтр кортежей.

    Дополнительные сведения о фильтрах см. в [статье о фильтрации визуальными элементами Power BI данных в других визуальных элементах](filter-api.md).

* Пользователь щелкает или выбирает элементы в визуальном элементе.

    Дополнительные сведения о выборе элементов см. в [статье о взаимодействии с визуальным элементом](selection-api.md).

### <a name="the-visual-interacts-with-power-bi"></a>Взаимодействие визуального элемента с Power BI

* Визуальный элемент запрашивает дополнительные данные из Power BI.

    Визуальный элемент может обрабатывать данные по частям. Метод API FetchMoreData запрашивает следующий фрагмент набора данных.

    Дополнительные сведения о методе `fetchMoreData` см. в [статье о получении дополнительных данных из Power BI](fetch-more-data.md).

* Служба событий

    Power BI может экспортировать отчеты в PDF или отправлять их по электронной почте (поддерживаются только сертифицированные визуальные элементы). Чтобы уведомить Power BI о завершении отрисовки и готовности к получению данных из PDF или по электронной почте, визуальный элемент должен вызвать API событий отрисовки.

    Дополнительные сведения см. в [статье об экспорте отчетов из Power BI в формат PDF](../../consumer/end-user-pdf.md).

    Дополнительные сведения о [службе событий](event-service.md).

## <a name="next-steps"></a>Дальнейшие действия

Вы являетесь веб-разработчиком и заинтересованы в том, чтобы создавать собственные визуальные элементы и добавлять их в AppSource? См. статьи [Разработка визуального элемента Power BI](./custom-visual-develop-tutorial.md) и [Публикация визуальных элементов Power BI в AppSource](../office-store.md).
