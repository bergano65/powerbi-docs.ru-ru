---
title: Создание карт ArcGIS от ESRI в службе Power BI
description: 'Создание карт ArcGIS от ESRI в службе Power BI '
author: mihart
manager: kvivek
ms.reviewer: lukaszp
featuredvideoid: EKVvOZmxg9s
ms.service: powerbi
ms.subservice: powerbi-service
ms.topic: conceptual
ms.date: 02/10/2019
ms.author: mihart
LocalizationGroup: Visualizations
ms.openlocfilehash: e001d35761eb7918aab2c427c3400df526e4dbc0
ms.sourcegitcommit: e2de2e8b8e78240c306fe6cca820e5f6ff188944
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/23/2019
ms.locfileid: "71192400"
---
# <a name="arcgis-maps-in-power-bi-desktop-by-esri"></a>Карты ArcGIS от Esri в Power BI Desktop

[!INCLUDE [power-bi-visuals-desktop-banner](../includes/power-bi-visuals-desktop-banner.md)]

Руководство посвящено созданию карты ArcGIS. Пользователь, которому автор предоставил общий доступ к карте ArcGIS, может просматривать карту и взаимодействовать с ней, но не может сохранять изменения. Дополнительные сведения о просмотре карты ArcGIS см. в статье о [взаимодействии с картами ArcGIS](power-bi-visualizations-arcgis.md).

Сочетание карт ArcGIS и Power BI — это больше, чем просто отображение точек на карте. Прекрасные информативные визуализации для карт можно создать, используя базовые карты, типы расположения, темы, стили символов и ссылочные слои. Сочетание официальных слоев данных на карте с пространственным анализом помогает лучше понять данные в визуализации.

 На мобильном устройстве нельзя создавать карты ArcGIS, но можно просматривать их и взаимодействовать с ними. См. статью о [взаимодействии с картами ArcGIS](power-bi-visualizations-arcgis.md).

> [!TIP]
> GIS расшифровывается как Geographic Information Systems (географические информационные системы).


В приведенном ниже примере на темно-сером холсте показана тепловая карта значений региональных продаж на фоне демографического слоя с наложением значений медианного совокупного чистого дохода за 2016 г. Как будет видно далее, карты ArcGIS предлагают практически безграничные возможности сопоставления, демографические данные и еще более привлекательную визуализацию карт, чтобы лучше всего представить данные.

![Вводное изображение ArcGIS](media/power-bi-visualization-arcgis/power-bi-intro-arcgis.png)

> [!TIP]
> Посетите [страницу компании ESRI в Power BI](https://www.esri.com/powerbi), на которой есть множество примеров и отзывов. Затем перейдите на страницу компании ESRI со сведениями о [начале работы с картами ArcGIS для Power BI](https://doc.arcgis.com/en/maps-for-powerbi/get-started/about-maps-for-power-bi.htm).

## <a name="user-consent"></a>Согласие пользователя
Карты ArcGIS Maps for Power BI предоставляются компанией Esri (www.esri.com). Использование карт ArcGIS для Power BI регулируется условиями и политикой конфиденциальности компании Esri. Пользователи Power BI, желающие использовать визуальный элемент "Карты ArcGIS для Power BI", должны принять условия в диалоговом окне получения согласия.

**Ресурсы**

[Условия](https://go.microsoft.com/fwlink/?LinkID=826322)

[Политика конфиденциальности](https://go.microsoft.com/fwlink/?LinkID=826323)

[Страница продукта "Карты ArcGIS для Power BI"](https://www.esri.com/powerbi)

<br/>


### <a name="enable-the-arcgis-map-in-power-bi-desktop-apppowerbicom"></a>Включение карты ArcGIS ***в Power BI Desktop (app.powerbi.com)***
В этом руководстве используется пример PBIX-файла [Анализ розничной торговли](http://download.microsoft.com/download/9/6/D/96DDC2FF-2568-491D-AAFA-AFDD6F763AE3/Retail%20Analysis%20Sample%20PBIX.pbix
). Чтобы включить **карты ArcGIS для Power BI**, сделайте следующее:

1. В верхнем левом разделе меню выберите **Файл** \> **Открыть**.
   
2. Найдите на локальном компьютере пример PBIX-файла **Анализ розничной торговли**.

1. Откройте **пример анализа розничной торговли** в представлении отчета ![снимок экрана: значок представления отчета.](media/power-bi-visualization-kpi/power-bi-report-view.png).

1. Выбрать ![Снимок экрана: желтая вкладка,](media/power-bi-visualization-kpi/power-bi-yellow-tab.png) чтобы создать новую страницу.

   
3. Щелкните на панели "Визуализации" значок карт ArcGIS для Power BI.
   
    ![Панель визуализации для карт ArcGIS](media/power-bi-visualization-arcgis/power-bi-viz-pane.png)
4. Power BI добавляет пустой шаблон карты ArcGIS на холст отчетов.
   
   ![Заполнитель визуализации ArcGIS](media/power-bi-visualization-arcgis/power-bi-esri-placeholder2new.png)

<br/>

## <a name="create-an-arcgis-map-visual"></a>Создание визуализации карты AcrGIS
Просмотрите видео о создании других визуализаций карт ArcGIS, а затем с помощью приведенных ниже инструкций попробуйте сделать это самостоятельно с помощью [PBIX-файла примера анализа розничной торговли](../sample-datasets.md).
   > [!NOTE]
   > В этом видео используется более старая версия Power BI Desktop.
   > 
   > 
<iframe width="560" height="315" src="https://www.youtube.com/embed/EKVvOZmxg9s" frameborder="0" allowfullscreen></iframe>

1. Из панели **Поля** перетащите поле данных в контейнеры **Расположение** или (и) **Широта** и **Долгота**. В нашем примере используется **Магазин > Город**.
   
   > [!NOTE]
   > Карты ArcGIS для Power BI автоматически определяют, как лучше всего просматривать выбранные поля — как фигуры или точки на карте. Значение по умолчанию можно изменить в настройках (см. ниже).
   > 
   > 
   
    ![Область "Поля" ArcGIS](media/power-bi-visualization-arcgis/power-bi-fields-pane3new.png)

3. Из панели **Поля** перетащите меру в контейнер **Размер**, чтобы изменить способ представления данных. В этом примере выберите **Sales > Last Year Sales** (Продажи > Продажи за прошлый год).
   
    ![Визуализация карты точек Esri](media/power-bi-visualization-arcgis/power-bi-esri-point-map-size2new.png)

## <a name="settings-and-formatting-for-arcgis-maps"></a>Настройки и форматирование для карт AcrGIS
Чтобы получить доступ к функциям форматирования **карт ArcGIS для Power BI**, нужно сделать следующее:

1. Чтобы получить доступ к дополнительным компонентам, нажмите кнопку с многоточием в правом верхнем углу визуализации и выберите команду **Изменить**.
   
   ![Область редактирования ArcGIS](media/power-bi-visualization-arcgis/power-bi-edit2.png)
   
   Доступные компоненты отображаются в верхней части визуализации. При выборе каждой функции открывается область задач с подробными параметрами.<br/>
   
   ![Область функций Esri](media/power-bi-visualization-arcgis/power-bi-esri-features-new.png)
   
   > [!NOTE]
   > Дополнительные сведения о параметрах и компонентах см. в приведенной ниже **подробной документации**.
   > 
   > 


<br/>

## <a name="detailed-documentation"></a>Подробная документация
Компания **Esri** предоставляет [полную документацию](https://go.microsoft.com/fwlink/?LinkID=828772) по набору функций **карт ArcGIS для Power BI**.

## <a name="features-overview"></a>Обзор функций
### <a name="base-maps"></a>Базовые карты
Предоставлены четыре базовые карты: Dark Gray Canvas, Light Gray Canvas, OpenStreetMap и Streets.  Streets — это стандартная базовая карта в ArcGIS.

Чтобы применить базовую карту, выберите ее в области задач.

![Визуальный элемент базовых карт Esri](media/power-bi-visualization-arcgis/power-bi-esri-base-maps-new.png)

### <a name="location-type"></a>Тип расположения
Карты ArgGIS для Power BI автоматически определяют, как лучше всего показать данные на карте. Выбираются точки или границы. С помощью параметров типа расположения можно точно настроить выбранный способ.

![Пример типов расположения Esri](media/power-bi-visualization-arcgis/power-bi-esri-location-types-new.png)

**Границы** будут работать, только если данные содержат стандартные географические значения. Esri автоматически распознает фигуру, которую нужно показать на карте. К стандартным географическим значениям относятся страны, области, почтовые индексы и т. д. Но, как и в случае геокодирования, Power BI может не обнаружить, что поля должны использоваться в качестве границы по умолчанию, или же границы для данных могут отсутствовать.  

### <a name="map-theme"></a>Тема карты
Предоставляются четыре темы карт. Темы "Только расположение" и "Размер" выбираются автоматически с учетом полей, привязанных к контейнерам расположения и добавленных к контейнерам **размера** на панели "Поля" в Power BI. В настоящее время мы используем **Размер**, поэтому изменим его на **Тепловую карту**; просто не забывайте отключать режим **Тепловая карта** перед переходом к следующему шагу.  

![Пример темы карты Esri](media/power-bi-visualization-arcgis/power-bi-esri-map-theme-new.png)

<table>
<tr><th>Тема</th><th>Описание</th>
<tr>
<td>Только расположение</td>
<td>Отображает на карте точки данных или заполненные границы, построенные на основе настроек типа расположения.</td>
</tr>
<tr>
<td>Тепловая карта</td>
<td>Отображает диаграмму интенсивности точек данных на карте.</td>
</tr>
<tr>
<td>Размер</td>
<td>Отображает на карте точки данных, размер которых основан на значении в контейнере "Размер" на панели "Поля".</td>
</tr>
<tr>
<td>Кластеризация</td>
<td>Отображает число точек данных в области на карте. </td>
</tr>
</table>


### <a name="symbol-style"></a>Стиль символов
С помощью стилей символов можно точно настроить способ представления данных на карте. Стили символов зависят от контекста и основаны на выбранных типе расположения и теме карты. В примере ниже для типа карты установлен параметр **Размер** и задано несколько настроек прозрачности, стиля и размера. 

![Пример стиля символа Esri](media/power-bi-visualization-arcgis/power-bi-esri-symbol-style-new.png)

### <a name="pins"></a>Закрепления
Привлекайте внимание к точкам на карте с помощью закреплений.  

1. Выберите вкладку **Pins** (Закрепления).
2. В поле поиска введите ключевые слова (например, адреса, места и важные объекты) и выберите нужные данные из раскрывающегося списка. На карте отображается символ, и для расположения автоматически увеличивается масштаб. Результаты поиска сохраняются на панели "Pins" (Закрепления) как карты расположения. Можно сохранить до 10 карт расположения.
   
   ![Пример вешки на карте ArcGIS](media/power-bi-visualization-arcgis/power-bi-pin-arcgis-newer.png)
3. Power BI добавит закрепление к этому расположению. Цвет закрепления можно изменить.
   
   ![Пример цветной вешки](media/power-bi-visualization-arcgis/power-bi-pin-color-new.png)
4. Добавляйте и удаляйте закрепления.
   
   ![Пример добавления и удаления вешки](media/power-bi-visualization-arcgis/power-bi-pin3.png)

### <a name="drive-time"></a>Время поездки на автомобиле
В области "Drive time" (Время поездки автомобилем) можно выбрать расположение и определить другие элементы карты в пределах указанного радиуса или периода поездки.  
    ![Пример времени поездки](media/power-bi-visualization-arcgis/power-bi-esri-drive-time.png)

1. Откройте вкладку **Drive time** (Время поездки автомобилем) и выберите инструмент единичного или множественного выбора. Выполните единичный выбор закрепления для Вашингтона, округ Колумбия.

   ![Пример выбора одной вешки](media/power-bi-visualization-arcgis/power-bi-esri-single-select.png)
   
   > [!TIP]
   > Увеличение масштаба на карте (с помощью значка +) упростит выбор расположения.
   > 
   > 
2. Предположим, вы на несколько дней летите в Вашингтон, округ Колумбия, и вам нужно узнать, какие магазины есть в приемлемых пределах для поездки автомобилем. Задайте для области поиска значение **Radius** (Радиус), укажите для расстояния значение в **50** миль и нажмите кнопку "OK".    
   
    ![Радиус времени поездки](media/power-bi-visualization-arcgis/power-bi-esri-drive-time-radius.png)

3. На карте отобразится участок, окрашенный фиолетовым цветом. Выберите любое расположение для отображения сведений о нем. При необходимости отформатируйте изображение, изменив цвет и контур участка.
   
    ![Пример формата радиуса с цветом и контуром](media/power-bi-visualization-arcgis/power-bi-esri-drive-time.png)

### <a name="reference-layer"></a>Ссылочный слой
#### <a name="reference-layer---demographics"></a>Ссылочный слой — демографические данные
В картах ArcGIS для Power BI представлено множество демографических слоев, с помощью которых можно согласовать данные Power BI с контекстом.

1. Выберите вкладку **Ссылочный слой** и нажмите кнопку **Демографические данные**.
2. Возле каждого названия слоя есть флажок. Установите флажок, чтобы добавить слой на карту.  В этом примере добавлены среднестатистические доходы населения.<br/>
   
    ![Пример "Ссылочный слой — демографические данные"](media/power-bi-visualization-arcgis/power-bi-esri-reference-layer-demographic.png)
3. Каждый слой — интерактивный. Чтобы просмотреть подробные сведения, можно навести курсор на круговую область или щелкнуть затененную область на карте.<br/>
   
    ![Пример "Ссылочный слой — сведения"](media/power-bi-visualization-arcgis/power-bi-esri-reference-layer-details.png)

#### <a name="reference-layer---arcgis"></a>Ссылочный слой — ArcGIS
ArcGIS Online дает возможность организациям публиковать общедоступные веб-карты. Кроме того, компания Esri предоставляет проверенный набор веб-карт с помощью Living Atlas. На вкладке ArcGIS можно найти все общедоступные веб-карты или карты Living Atlas и добавить их как ссылочные слои.

1. Выберите вкладку **Ссылочный слой** и выберите **ArcGIS**.
2. Введите условия поиска, а затем выберите слой карты. В этом примере выбраны избирательные округи США.
   
    ![Пример демографических данных Esri](media/power-bi-visualization-arcgis/power-bi-reference-details.png)
3. Чтобы просмотреть подробные сведения, выберите затененную область для активации элемента *Select from reference layer* (Выбрать из ссылочного слоя). Используйте средство выбора ссылочного слоя для выделения границ или объектов этого слоя.

<br/>

## <a name="selecting-data-points"></a>Выбор точек данных
Карты ArcGIS для Power BI поддерживают пять режимов выбора, которые позволяют правильно и быстро выбирать данные.

Чтобы изменить режим выделения, наведите указатель мыши на значок инструмента "одинарный выбор", показанный на рисунке ниже. Это также позволит развернуть скрытую панель, чтобы отобразить дополнительные средства.

![Средство выбора Esri](media/power-bi-visualization-arcgis/power-bi-esri-selection-tools2.png)

У каждого средства есть уникальная роль, позволяющая выбрать данные. 

![Средство одиночного выбора Esri](media/power-bi-visualization-arcgis/power-bi-esri-selection-single2.png) Позволяет выбрать отдельные точки данных.

![Средство выделения Esri](media/power-bi-visualization-arcgis/power-bi-esri-selection-marquee2.png) Позволяет начертить прямоугольник на карте и выбрать точки данных, содержащиеся в нем.

![Ссылочный слой выбора Esri](media/power-bi-visualization-arcgis/power-bi-esri-selection-reference-layer2.png) Позволяет использовать границы или многоугольники в ссылочных слоях для выбора содержащихся в них точек данных.

![Буферный слой выбора Esri](media/power-bi-visualization-arcgis/power-bi-esri-selection-reference-buffer.png) Позволяет выбирать данные с помощью слоя буфера.

![Выделенный аналогичный фрагмент Esri](media/power-bi-visualization-arcgis/power-bi-esri-selection-reference-similar.png) Позволяет выбирать точки данных, которые похожи друг на друга.

> [!NOTE]
> Одновременно можно выбрать не более 250 точек.
> 
> 

<br/>

## <a name="getting-help"></a>Получение справки
Компания **Esri** предоставляет [полную документацию](https://go.microsoft.com/fwlink/?LinkID=828772) по набору функций **карт ArcGIS для Power BI**.

Чтобы узнать последние сведения или сообщить о проблеме, можно задать вопросы и получить ответы в [темах сообщества Power BI, связанных с **картами ArcGIS для Power BI**](https://go.microsoft.com/fwlink/?LinkID=828771).

Если у вас есть предложения по улучшению, отправьте их в [список идей Power BI](https://ideas.powerbi.com).

<br/>

## <a name="managing-use-of-arcgis-maps-for-power-bi-within-your-organization"></a>Управление использованием карт ArcGIS для Power BI в организации
С помощью Power BI пользователи, администраторы клиентов и ИТ-администраторы могут указывать, использовать ли карты ArcGIS для Power BI. Ниже вы найдете шаги, которые может предпринимать каждая роль для управления использованием карт ArcGIS. 

### <a name="user-options"></a>Параметры пользователя
В Power BI Desktop пользователи могут отключить использование карт ArcGIS для Power BI в разделе **Файл** > **Параметры и настройки** на вкладке **Параметры** > **Безопасность**. Если карты ArcGIS отключены, они не загружаются по умолчанию.

![Пример диалогового окна "Безопасность рабочего стола"](media/power-bi-visualization-arcgis/power-bi-desktop-security-dialog2.png)

### <a name="tenant-admin-options"></a>Параметры администратора клиента
На сайте PowerBI.com администраторы клиента могут запретить всем пользователям клиента использовать карты ArcGIS для Power BI, отключив **Параметры** > **Портал администратора** > **Параметры клиента**. После этого в Power BI на панели "Визуализации" больше не будет отображаться значок карт ArcGIS для Power BI.

![Пример с порталом администрирования ArcGIS](media/power-bi-visualization-arcgis/power-bi-arcgis-admin-portal2.png)

### <a name="it-administrator-options"></a>Параметры ИТ-администратора
Power BI Desktop поддерживает использование **групповой политики**, чтобы отключать карты ArcGIS для Power BI на компьютерах, развернутых в организации.

<table>
<tr><th>Атрибут</th><th>Значение</th>
</tr>
<tr>
<td>key</td>
<td>Software\Policies\Microsoft\Power BI Desktop&lt;/td&gt;
</tr>
<tr>
<td>valueName</td>
<td>EnableArcGISMaps</td>
</tr>
</table>

Значение 1 (десятичное) позволяет включить карты ArcGIS для Power BI.

Значение 0 (десятичное) позволяет отключить карты ArcGIS для Power BI.

## <a name="considerations-and-limitations"></a>Рекомендации и ограничения
Карты ArcGIS для Power BI доступны в следующих службах и приложениях.

<table>
<tr><th>Службы или приложения</th><th>Доступность</th></tr>
<tr>
<td>Power BI Desktop</td>
<td>Да</td>
</tr>
<tr>
<td>Служба Power BI (PowerBI.com)</td>
<td>Да</td>
</tr>
<tr>
<td>Мобильные приложения Power BI</td>
<td>Да</td>
</tr>
<tr>
<td>Публикация в Интернете через Power BI</td>
<td>Нет</td>
</tr>
<tr>
<td>Power BI Embedded</td>
<td>Нет</td>
</tr>
<tr>
<td>Внедрение службы Power BI (PowerBI.com)</td>
<td>Нет</td>
</tr>
</table>

В службах или приложениях, для которых карты ArcGIS для Power BI недоступны, визуализация отобразится как пустой визуальный элемент с эмблемой Power BI.

При геокодировании будут обработаны только первые 1500 адресов. Геокодирование географических названий или стран не ограничивается 1500 адресами.

<br/>

**Как карты ArcGIS Maps for Power BI работают вместе?**
Карты ArcGIS Maps for Power BI предоставляются компанией Esri (www.esri.com). Использование карт ArcGIS Maps for Power BI регулируется [условиями](https://go.microsoft.com/fwlink/?LinkID=8263222) и [политикой конфиденциальности](https://go.microsoft.com/fwlink/?LinkID=826323) компании Esri. Пользователи Power BI, желающие использовать визуальные элементы ArcGIS Maps for Power BI, должны принять условия в диалоговом окне получения согласия (подробности см. в разделе "Согласие пользователя").  Использование ArcGIS Maps for Power BI регулируется политикой конфиденциальности и условиями компании Esri, которые также связаны с диалоговым окном согласия. Перед началом использования ArcGIS Maps for Power BI каждый пользователь должен согласиться с условиями. Как только пользователь согласится с условиями, данные, привязанные к визуальному элементу, отправляются в службы Esri по крайней мере для геокодирования, то есть преобразования сведений о расположении в сведения о широте и долготе, которые могут быть представлены на карте. Следует исходить из того, что любые данные, привязанные к визуализации данных, могут быть переданы в службы Esri. Компания Esri предоставляет такие службы, как обзорные карты, пространственная аналитика, геокодирование и т. д. Визуальные элементы ArcGIS Maps for Power BI взаимодействуют с этими службами, используя соединение SSL, защищенное сертификатом, который предоставляется и поддерживается компанией Esri. Дополнительные сведения о картах ArcGIS Maps for Power BI можно получить на [странице продукта ArcGIS Maps for Power BI](https://www.esri.com/powerbi).

Когда пользователь регистрируется для подписки Plus, предоставляемой Esri через ArcGIS Maps for Power BI, он входит в прямое отношение с Esri. Power BI не отправляет в Esri персональные данные пользователя. Пользователь выполняет вход и устанавливает отношение доверия с предоставляемым Esri приложением AAD, используя собственное удостоверение AAD. Таким образом, пользователь предоставляет доступ к своим персональным данным непосредственно компании Esri. После того как пользователь добавит контент Plus в визуальный элемент ArcGIS Maps for Power BI, другим пользователям Power BI также потребуется подписка от Esri для просмотра или изменения этого контента. 

Технические вопросы о работе ArcGIS Maps for Power BI компании Esri можно задать на сайте технической поддержки Esri.


**Требуется ли платить за использование карт ArcGIS для Power BI?**

Все пользователи Power BI могут бесплатно использовать карты ArcGIS для Power BI. Это компонент, предоставляемый компанией **Esri**. Его использование регулируется условиями и политикой конфиденциальности, указанными компанией **Esri**, как упоминалось ранее в этой статье.

**В Power BI Desktop отображается сообщение о том, что кэш заполнен**

Мы работаем над устранением этой проблемы.  Тем временем, чтобы очистить кэш, попробуйте удалить файлы в расположении C:\Users\\AppData\Local\Microsoft\Power BI Desktop\CEF, а затем перезапустите Power BI.

**Поддерживают ли карты ArcGIS для Power BI файлы фигур ESRI?**

Карты ArcGIS для Power BI автоматически определяют стандартные границы стран, регионов, штатов и провинций, а также почтовые индексы. Если нужно создать собственные фигуры, это можно сделать с помощью [карт фигур для Power BI Desktop (предварительная версия)](desktop-shape-map.md).

**Можно ли просматривать карты ArcGIS автономно?**

Нет. Чтобы отобразить карты Power BI, требуется сетевое подключение.

**Можно ли подключиться к учетной записи ArcGIS Online через Power BI?**

Эта возможность пока недоступна. [Голосуйте за эту идею](https://ideas.powerbi.com/forums/265200-power-bi-ideas/suggestions/9154765-arcgis-geodatabases), и мы отправим вам на почту сообщение, когда начнем работу над этой функцией.  

## <a name="next-steps"></a>Дальнейшие действия
[Взаимодействие с картой ArcGIS, к которой вам предоставлен общий доступ](power-bi-visualizations-arcgis.md)

[Запись блога о доступных картах ArcGIS для Power BI](https://powerbi.microsoft.com/blog/announcing-arcgis-maps-for-power-bi-by-esri-preview/)

Появились дополнительные вопросы? [Попробуйте задать вопрос в сообществе Power BI.](http://community.powerbi.com/)

